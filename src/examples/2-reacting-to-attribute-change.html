<html>
  <head>
    <script src="http://127.0.0.1:8000/index.js"></script>
    <script>
      window.onload = () => {
        async function handleCreateOrderPayload(createOrderPayload) {
          alert(
            "CREATE ORDER PAYLOAD: \n" +
              JSON.stringify(createOrderPayload, null, 2)
          );
        }

        document
          .getElementById("duffel-checkout")
          .addEventListener("onPayloadReady", ({ detail }) =>
            handleCreateOrderPayload(detail)
          );

        // Maybe something will change about passengers or the offer or the settings
        // the component should be able to handle it without having to unmount and mount again
        // to allow us to persist state in the component (note the mount time display remains the same)
        let counter = 0;
        setInterval(() => {
          document
            .getElementById("duffel-checkout")
            .setAttribute(
              "offer",
              `{"id":"new_offer_id_for_example_${++counter}"}`
            );
        }, 2000);
      };
    </script>
  </head>

  <body style="font-family: sans-serif">
    <h1>Checkout page</h1>

    <duffel-checkout
      id="duffel-checkout"
      offer='{"id":"off_123"}'
    ></duffel-checkout>
  </body>
</html>
